---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';
---

<Layout 
  title="About Me - Portfolio" 
  description="Full-stack Developer v·ªõi nhi·ªÅu nƒÉm kinh nghi·ªám trong web development"
>
  <Navigation />
  
  <!-- Hero Section -->
  <section class="min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950 text-white py-20 px-4 relative overflow-hidden">
    <!-- Animated background elements -->
    <div class="absolute inset-0 overflow-hidden">
      <div class="bg-element bg-element-1"></div>
      <div class="bg-element bg-element-2"></div>
      <div class="bg-element bg-element-3"></div>
    </div>

    <div class="container mx-auto max-w-7xl relative z-10">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <!-- Left Content -->
        <div class="space-y-6 fade-in-up">
          <!-- Optimizing Badge -->
          <div class="inline-flex items-center gap-2 bg-purple-500/20 backdrop-blur-sm border border-purple-500/30 rounded-full px-4 py-2">
            <div class="pulse-dot w-2 h-2 bg-purple-400 rounded-full"></div>
            <span class="text-sm flex items-center gap-2">
              ‚ö° Optimizing...
            </span>
          </div>

          <!-- Main Heading -->
          <div>
            <h1 class="text-5xl lg:text-7xl font-bold leading-tight mb-2">
              Hi, I'm C√¥ng Minh
            </h1>
            <h2 class="text-4xl lg:text-6xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
              Full-stack Developer
            </h2>
          </div>

          <!-- Terminal Mock -->
          <div class="terminal-window bg-slate-900/50 backdrop-blur-sm border border-slate-700 rounded-lg p-4 font-mono text-sm">
            <div class="flex gap-2 mb-3">
              <div class="w-3 h-3 bg-red-500 rounded-full"></div>
              <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
              <div class="w-3 h-3 bg-green-500 rounded-full"></div>
              <span class="ml-2 text-slate-400 text-xs">terminal</span>
            </div>
            <div class="text-green-400 space-y-1">
              <div id="typed-lines" class="space-y-1"></div>
              <div class="typing-text">
                <span class="typing-content"></span><span class="cursor">|</span>
              </div>
            </div>
          </div>

          <!-- Description -->
          <p class="text-lg text-slate-300 leading-relaxed">
            Frontend Developer v·ªõi 5+ nƒÉm kinh nghi·ªám trong React Native, Expo, React, Tailwind CSS, v√† Laravel
          </p>

          <!-- CTA Buttons -->
          <div class="flex flex-wrap gap-4">
            <a
              href="mailto:congminh1203@gmail.com"
              class="cta-button bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-full font-medium inline-flex items-center gap-2 transition-all shadow-lg shadow-purple-500/50"
            >
              Get in Touch
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </a>

            <a
              href="/resume.pdf"
              download
              class="cta-button bg-transparent border-2 border-slate-600 hover:border-purple-500 text-white px-6 py-3 rounded-full font-medium inline-flex items-center gap-2 transition-all"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
              Download Resume
            </a>
          </div>

          <!-- Social Links -->
          <div class="flex items-center gap-4 pt-4">
            <span class="text-slate-400">Follow me on:</span>
            <a
              href="https://github.com"
              target="_blank"
              rel="noopener noreferrer"
              class="social-icon text-slate-400 hover:text-white transition-colors"
            >
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
              </svg>
            </a>
            <a
              href="https://linkedin.com"
              target="_blank"
              rel="noopener noreferrer"
              class="social-icon text-slate-400 hover:text-white transition-colors"
            >
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Right Side - Profile Image -->
        <div class="relative fade-in-up delay-1">
          <div class="floating-container">
            <!-- Decorative rotating elements -->
            <div class="deco-element deco-element-1 absolute -bottom-4 -left-4 w-20 h-20 bg-green-400/30 rounded-lg rotate-element"></div>
            <div class="deco-element deco-element-2 absolute -bottom-4 -right-4 w-16 h-16 bg-blue-400/30 rounded-full rotate-reverse"></div>
            <div class="deco-element deco-element-3 absolute top-10 -right-6 w-12 h-12 bg-purple-400/30 rounded-lg float-up-down"></div>

            <!-- Profile Image -->
            <div class="relative w-full max-w-md mx-auto profile-image">
              <div class="aspect-square rounded-full overflow-hidden border-4 border-purple-500/50 shadow-2xl shadow-purple-500/50">
                <img
                  src="/images/profile.jpg"
                  alt="Profile"
                  class="w-full h-full object-cover"
                  onerror="this.src='https://via.placeholder.com/500?text=Profile'"
                />
              </div>
            </div>

            <!-- Floating icons -->
            <div class="floating-icon floating-icon-1 absolute top-20 -left-8 bg-slate-900/80 backdrop-blur-sm p-3 rounded-full border border-slate-700">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-coffee h-4 w-4"><path d="M17 8h1a4 4 0 1 1 0 8h-1"></path><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"></path><line x1="6" x2="6" y1="2" y2="4"></line><line x1="10" x2="10" y1="2" y2="4"></line><line x1="14" x2="14" y1="2" y2="4"></line></svg>
            </div>
            <div class="floating-icon floating-icon-2 absolute bottom-32 -right-8 bg-slate-900/80 backdrop-blur-sm p-3 rounded-full border border-slate-700">
              <span class="text-2xl">‚öôÔ∏è</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Floating Code Button -->
    <div class="fixed bottom-8 right-8 z-50 scale-in">
      <button class="code-button bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 rounded-full shadow-lg shadow-purple-500/50 hover:scale-110 transition-transform">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
        </svg>
      </button>
    </div>
  </section>

  <Footer />
</Layout>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  // Wait for DOM to be ready
  document.addEventListener('DOMContentLoaded', () => {
    // Typing animation texts
    const typingTexts = [
      "const developer = 'Nguyen Cong Minh';",
      "function buildAmazingApps() {",
      "  return 'Laravel + React';",
      "}",
      "// Coffee.exe has stopped working",
      "git commit -m 'Another day, another bug fixed'",
      "console.log('Hello, World! üëã');"
    ];

    let currentTextIndex = 0;
    const typingContent = document.querySelector('.typing-content');
    const typedLines = document.getElementById('typed-lines');
    
    function typeText() {
      if (!typingContent) return;
      
      const currentText = typingTexts[currentTextIndex];
      
      // Clear all typed lines when reaching the Coffee.exe line
      if (currentText === "// Coffee.exe has stopped working" && typedLines) {
        gsap.to(typedLines.children, {
          opacity: 0,
          stagger: 0.02,
          duration: 0.2,
          onComplete: () => {
            typedLines.innerHTML = '';
          }
        });
      }
      
      // Set the full text immediately with HTML for syntax highlighting
      typingContent.innerHTML = formatCode(currentText);
      
      // Animate width to create typing effect
      gsap.fromTo(typingContent, 
        { width: 0 },
        { 
          width: 'auto',
          duration: currentText.length * 0.05,
          ease: 'none',
          onComplete: () => {
            // Add the completed line to typed-lines
            if (typedLines) {
              const completedLine = document.createElement('div');
              completedLine.innerHTML = formatCode(currentText);
              completedLine.style.opacity = '0';
              typedLines.appendChild(completedLine);
              
              // Fade in the completed line
              gsap.to(completedLine, {
                opacity: 0.7,
                duration: 0.3
              });
            }
            
            // Clear the current typing content
            typingContent.innerHTML = '';
            
            // Move to next text
            currentTextIndex = (currentTextIndex + 1) % typingTexts.length;
            
            // If we've completed all texts, clear and restart after a delay
            if (currentTextIndex === 0 && typedLines) {
              gsap.delayedCall(2, () => {
                gsap.to(typedLines.children, {
                  opacity: 0,
                  stagger: 0.05,
                  duration: 0.3,
                  onComplete: () => {
                    typedLines.innerHTML = '';
                    gsap.delayedCall(0.5, typeText);
                  }
                });
              });
            } else {
              // Wait a bit before typing next text
              gsap.delayedCall(0.3, typeText);
            }
          }
        }
      );
    }

    // Helper function to add syntax highlighting
    function formatCode(text: string) {
      // Simple syntax highlighting
      return text
        .replace(/(const|function|return|git|console)/g, '<span class="text-purple-400">$1</span>')
        .replace(/('.*?')/g, '<span class="text-yellow-300">$1</span>')
        .replace(/(\/\/.*$)/g, '<span class="text-gray-500">$1</span>')
        .replace(/(\{|\}|\(|\))/g, '<span class="text-blue-400">$1</span>');
    }

    // Start typing animation after initial delay
    gsap.delayedCall(1, typeText);

    // Hero section fade in animations
    gsap.from('.fade-in-up', {
      opacity: 0,
      y: 30,
      duration: 0.8,
      stagger: 0.2,
      ease: 'power3.out'
    });

    // Profile image scale in
    gsap.from('.profile-image', {
      opacity: 0,
      scale: 0.8,
      duration: 1,
      delay: 0.3,
      ease: 'back.out(1.7)'
    });

    // Pulsing dot
    gsap.to('.pulse-dot', {
      scale: 1.3,
      opacity: 0.5,
      duration: 1.5,
      repeat: -1,
      yoyo: true,
      ease: 'power2.inOut'
    });

    // Floating animation for profile container
    gsap.to('.floating-container', {
      y: -10,
      duration: 3,
      repeat: -1,
      yoyo: true,
      ease: 'power1.inOut'
    });

    // Floating icons
    gsap.to('.floating-icon-1', {
      y: -10,
      duration: 3,
      delay: 0.5,
      repeat: -1,
      yoyo: true,
      ease: 'power1.inOut'
    });

    gsap.to('.floating-icon-2', {
      y: -10,
      duration: 3,
      delay: 1,
      repeat: -1,
      yoyo: true,
      ease: 'power1.inOut'
    });

    // Rotating decorative elements
    gsap.to('.rotate-element', {
      rotation: 360,
      duration: 20,
      repeat: -1,
      ease: 'none'
    });

    gsap.to('.rotate-reverse', {
      rotation: -360,
      duration: 15,
      repeat: -1,
      ease: 'none'
    });

    gsap.to('.float-up-down', {
      y: -20,
      duration: 4,
      delay: 2,
      repeat: -1,
      yoyo: true,
      ease: 'power1.inOut'
    });

    // Background elements pulsing
    gsap.to('.bg-element-1', {
      scale: 1.2,
      opacity: 0.6,
      duration: 4,
      repeat: -1,
      yoyo: true,
      ease: 'power2.inOut'
    });

    gsap.to('.bg-element-2', {
      scale: 1.3,
      opacity: 0.5,
      duration: 5,
      delay: 1,
      repeat: -1,
      yoyo: true,
      ease: 'power2.inOut'
    });

    gsap.to('.bg-element-3', {
      scale: 1.4,
      opacity: 0.7,
      duration: 6,
      delay: 2,
      repeat: -1,
      yoyo: true,
      ease: 'power2.inOut'
    });

    // Code button scale in
    gsap.from('.code-button', {
      scale: 0,
      duration: 0.5,
      delay: 1,
      ease: 'back.out(1.7)'
    });

    // Hover animations for CTA buttons
    const ctaButtons = document.querySelectorAll('.cta-button');
    ctaButtons.forEach(button => {
      button.addEventListener('mouseenter', () => {
        gsap.to(button, { scale: 1.05, duration: 0.3 });
      });
      button.addEventListener('mouseleave', () => {
        gsap.to(button, { scale: 1, duration: 0.3 });
      });
      button.addEventListener('mousedown', () => {
        gsap.to(button, { scale: 0.95, duration: 0.1 });
      });
      button.addEventListener('mouseup', () => {
        gsap.to(button, { scale: 1.05, duration: 0.1 });
      });
    });

    // Social icons hover
    const socialIcons = document.querySelectorAll('.social-icon');
    socialIcons.forEach(icon => {
      icon.addEventListener('mouseenter', () => {
        gsap.to(icon, { scale: 1.2, rotation: 5, duration: 0.3 });
      });
      icon.addEventListener('mouseleave', () => {
        gsap.to(icon, { scale: 1, rotation: 0, duration: 0.3 });
      });
    });

    // Code button hover
    const codeButton = document.querySelector('.code-button');
    if (codeButton) {
      codeButton.addEventListener('mouseenter', () => {
        gsap.to(codeButton, { scale: 1.1, rotation: 90, duration: 0.3 });
      });
      codeButton.addEventListener('mouseleave', () => {
        gsap.to(codeButton, { scale: 1, rotation: 0, duration: 0.3 });
      });
    }
  });
</script>

<style>
  /* Base styles only - GSAP handles animations */
  .bg-element {
    position: absolute;
    border-radius: 50%;
    filter: blur(40px);
  }

  .bg-element-1 {
    top: 5rem;
    left: 2.5rem;
    width: 5rem;
    height: 5rem;
    background: rgba(168, 85, 247, 0.2);
  }

  .bg-element-2 {
    top: 10rem;
    right: 5rem;
    width: 8rem;
    height: 8rem;
    background: rgba(59, 130, 246, 0.2);
  }

  .bg-element-3 {
    bottom: 5rem;
    left: 25%;
    width: 6rem;
    height: 6rem;
    background: rgba(34, 197, 94, 0.2);
  }

  .typing-text {
    display: flex;
    align-items: center;
  }

  .typing-content {
    overflow: hidden;
    white-space: nowrap;
    display: inline-block;
  }

  .cursor {
    display: inline-block;
    width: 1px;
    height: 1.2em;
    background-color: transparent;
    margin-left: 2px;
    animation: blink 0.75s step-end infinite;
  }

  @keyframes blink {
    from, to {
      opacity: 1;
    }
    50% {
      opacity: 0;
    }
  }

  /* Responsive adjustments */
  @media (max-width: 1024px) {
    .floating-icon {
      display: none;
    }

    .deco-element {
      width: 3rem !important;
      height: 3rem !important;
    }
  }
</style>

<style>
  /* Styles for visual editor content */
  .visual-content :global(img) {
    max-width: 100%;
    height: auto;
  }

  .visual-content :global(.container) {
    max-width: 100%;
  }

  .visual-content :global(.row) {
    display: flex;
    flex-wrap: wrap;
    margin: 0 -15px;
  }

  .visual-content :global(.col) {
    flex: 1;
    padding: 0 15px;
  }

  .visual-content :global(.col-1) { flex: 0 0 8.333333%; }
  .visual-content :global(.col-2) { flex: 0 0 16.666667%; }
  .visual-content :global(.col-3) { flex: 0 0 25%; }
  .visual-content :global(.col-4) { flex: 0 0 33.333333%; }
  .visual-content :global(.col-5) { flex: 0 0 41.666667%; }
  .visual-content :global(.col-6) { flex: 0 0 50%; }
  .visual-content :global(.col-7) { flex: 0 0 58.333333%; }
  .visual-content :global(.col-8) { flex: 0 0 66.666667%; }
  .visual-content :global(.col-9) { flex: 0 0 75%; }
  .visual-content :global(.col-10) { flex: 0 0 83.333333%; }
  .visual-content :global(.col-11) { flex: 0 0 91.666667%; }
  .visual-content :global(.col-12) { flex: 0 0 100%; }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .visual-content :global(.row) {
      flex-direction: column;
    }

    .visual-content :global(.col),
    .visual-content :global([class*="col-"]) {
      flex: 0 0 100%;
      margin-bottom: 1rem;
    }
  }

  /* Bootstrap-like utilities that GrapesJS might use */
  .visual-content :global(.text-center) { text-align: center; }
  .visual-content :global(.text-left) { text-align: left; }
  .visual-content :global(.text-right) { text-align: right; }
  .visual-content :global(.text-justify) { text-align: justify; }

  .visual-content :global(.d-block) { display: block; }
  .visual-content :global(.d-inline) { display: inline; }
  .visual-content :global(.d-inline-block) { display: inline-block; }
  .visual-content :global(.d-flex) { display: flex; }

  .visual-content :global(.justify-content-start) { justify-content: flex-start; }
  .visual-content :global(.justify-content-center) { justify-content: center; }
  .visual-content :global(.justify-content-end) { justify-content: flex-end; }
  .visual-content :global(.justify-content-between) { justify-content: space-between; }

  .visual-content :global(.align-items-start) { align-items: flex-start; }
  .visual-content :global(.align-items-center) { align-items: center; }
  .visual-content :global(.align-items-end) { align-items: flex-end; }

  .visual-content :global(.btn) {
    display: inline-block;
    padding: 0.5rem 1rem;
    margin-bottom: 0;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    text-align: center;
    text-decoration: none;
    vertical-align: middle;
    cursor: pointer;
    border: 1px solid transparent;
    border-radius: 0.25rem;
    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
  }

  .visual-content :global(.btn-primary) {
    color: #fff;
    background-color: #007bff;
    border-color: #007bff;
  }

  .visual-content :global(.btn-primary:hover) {
    color: #fff;
    background-color: #0056b3;
    border-color: #004085;
  }

  .visual-content :global(.btn-secondary) {
    color: #fff;
    background-color: #6c757d;
    border-color: #6c757d;
  }

  .visual-content :global(.btn-secondary:hover) {
    color: #fff;
    background-color: #545b62;
    border-color: #4e555b;
  }
</style>
